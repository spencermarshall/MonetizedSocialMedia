import random
import boto3
import tweepy
import os
import json
import re




def lotr_question(event, context):
    questions = {
        1: "What are your opinions on Frodo Baggins?",
        2: "What are your opinions on Samwise Gamgee?",
        3: "What are your opinions on Gandalf?", #todo maybe delete
        4: "What are your opinions on Aragorn?",
        5: "What are your opinions on Legolas?",
        6: "What are your opinions on Gimli?",
        7: "What are your opinions on Gollum?",
        8: "What are your opinions on Saruman?",
        9: "What are your opinions on Sauron?",
        # 10: "What are your opinions on Galadriel?",
        10: "How does Tolkien's writing resonate with you?",
        11: "What are your opinions on Elrond?",
        12: "What are your opinions on Arwen?",
        13: "What are your opinions on Ã‰owyn?",
        14: "What are your opinions on Bilbo Baggins in The Hobbit?",
        15: "What are your opinions on Thorin?",
        16: "What are your opinions on Smaug the Dragon?",
        17: "What are your opinions on Boromir?",
        18: "What is your favorite quote from The Hobbit?",
        19: "What are your opinions on Faramir?",
        20: "What are your opinions on Ã‰omer?",
        21: "What are your opinions on Treebeard?",
        22: "What are your opinions on Bard the Bowman?",
        23: "What are your opinions on Radagast the Brown?",
        24: "What are your opinions on Isildur?",
        25: "What are your opinions on the Balrog?",
        26: "What do you think is the most iconic scene in The Hobbit?",
        27: "Frodo or Sam?",
        28: "What do you think is the most significant sacrifice made by a character in LOTR?",
        29: "What do you think is the most iconic scene in LOTR?",
        30: "If you could possess one item from LOTR, what would it be?",
        31: "What is the most memorable piece of wisdom offered by Gandalf?",
        # 32: "Do you like how friendship and loyalty are portrayed in LOTR?",
        32: "How has LOTR influenced your life?",
        33: "Who do you think is the most underrated character in LOTR?", #todo maybe delete, 9 comments last time if low again then delete
        34: "What do you think is the most visually stunning location in Middle-earth?",
        35: "What lessons can we learn from LOTR?",
        36: "What is the most significant moment in Middle-earth history?",
        37: "Which character from LOTR deserves more recognition?",
        38: "What's the biggest plot difference between the LOTR books and films?",
        39: "If you could change the ending of any movie, what would you change?", #todo maybe delete
        # 39: "What do you think is the most epic battle in LOTR?",
        40: "What do you think is the most tragic moment in LOTR?",
        41: "What do you think is the most heartwarming moment in LOTR?",
        # 42: "What do you think is the most significant theme in The Hobbit?",
        42: "Which LOTR character deserved more screen time?",
        43: "Which creature in Middle-earth is most iconic?",
        44: "What do you think is the most significant event in the history of Middle-earth?",
        45: "What do you think is the most powerful piece of music in LOTR?",
        46: "What do you think is the most significant relationship in LOTR?",
        47: "What thoughts do you have on evil in LOTR?",
        48: "What's your general feeling toward the orcs?",
        # 49: "Which moment in LOTR shows the greatest betrayal?",
        # 50: "Which LOTR moment shows the greatest courage?",
        # 51: "Which moment in LOTR shows the greatest wisdom?",
        49: "If you've never read the Silmarillion, why not?",
        50: "If you've never read the Hobbit book, why not?",
        51: "What are your opinions on a LOTR movie told from the perspective of a villain?",
        52: "Which character from The Hobbit deserves more recognition?",
        53: "What is your favorite quote from LOTR?",
        54: "What legacy does LOTR leave?",
        # 55: "How does the beauty of Middle-earth enhance its storytelling?",
        55: "Did The Rings of Power deserve all the hate?",
        56: "Which character in LOTR inspires you the most?", #todo maybe delete
        57: "What role does fate play in LOTR?",
        58: "How old were you when you first discovered LOTR?",
        59: "How has LOTR shaped your imagination?",
        60: "What is your favorite quote from Bilbo Baggins?",  # here has young bilbo picture, maybe not applicable maybe most iconic
        # 61: "What part of Tolkien's world-building do you like the most?",
        61: "What feelings do you get from watching LOTR?",
        62: "What do you ENJOY about Rings of Power?",
        63: "If you could write a new Middle-earth story, what would it be about?",
        64: "What do you think is the most powerful symbol in LOTR?",
        65: "Who is the Lord of the Rings?",
        66: "What do you think is the most powerful aspect of Tolkienâ€™s storytelling?",
        67: "What do you think is the biggest act of heroism in LOTR?",
        # 68: "What do you think is the biggest moment of hope in LOTR?",
        68: "Should they stop making new LOTR content?",
        # 69: "What is the biggest moment of despair in LOTR?",
        69: "Tweet like you're Sauron",
        70: "What is the best moment of triumph in LOTR?",
        71: "What is the biggest moment of loss in LOTR?",
        72: "Which LOTR moment of sacrifice is most significant?",
        73: "Did you like the killing count game between Gimli and Legolas?",
        # 74: "Which LOTR moment of loyalty is most significant?",
        74: "What change annoys you the most in Peter Jackson's Lord of the Rings?",
        # 75: "What are some LOTR social media accounts you'd recommend?",
        75: "What do you enjoy about the adventures in The Hobbit?",
        # 76: "What LOTR moment showed the greatest unity?",
        76: "What's your overall take on The Hobbit?",
        77: "If you could create your own LOTR story, what would it be about?",
        78: "Are you excited for 'The Hunt for Gollum' movie coming Deecmber 2027?",
        # 79: "What is the most underrated aspect of Middle-earth?",
        79: "What's your opinion on hope in LOTR?",
        # 80: "Did you enjoy the use of CGI for the Dragon in The Hobbit?",
        # 80: "What is the most powerful moment in LOTR?",
        80: "Would you want an bow or axe?",
        81: "What is the most impactful death in the LOTR series?",
        82: "What is your favorite quote from Saruman?",
        # 83: "What is the most memorable moment from The Hobbit?",
        83: "What's the most emotional moment in LOTR for you?",
        84: "The Shire or Rivendell: where would you rather live?",
        85: "If you could visit one place in Middle-earth, where would it be?",
        86: "Which weapon in LOTR is most iconic?",
        87: "Which LOTR character would you want as a travel companion?",
        88: "If you could change one event in LOTR, what would it be?",
        89: "What weapon from LOTR is the coolest?",
        90: "If you were in the Fellowship, what role would you play?",
        91: "What is the most epic moment in The Hobbit?",
        92: "What is the most memorable scene from Rings of Power?",
        93: "What are your opinions of Rings of Power?",
        94: "Did you enjoy The Hobbit book?",
        95: "What are your opinions of The Hobbit movies?",
        96: "What are your opinions of the LOTR books?",
        97: "What are your opinions of the LOTR movies?",
        98: "What are your opinions of the Silmarillion?",
        # 99: "What are your opinions of the LOTR fan community?",
        99: "What do you appreciate about Tolkien's characters?",
        100: "The greatest trilogy of all time",
        # 101: "What are your opinions on the LOTR soundtrack?",
        101: "How do you feel about the magic in Middle-earth?",
        102: "Which LOTR character would you want to be friends with?",
        103: "What are your opinions on the direction Rings of Power is heading?",
        104: "If you could talk to one LOTR character, who would it be?",
        # 105: "If you could witness one Middle-earth event, what would it be?",
        # 105: "What's your favorite LOTR fan theory?",
        105: "How do you feel about the music in the LOTR films?",
        106: "Which Middle-earth creature would you want as a pet?",
        107: "What is your favorite Middle-earth location?",
        108: "What is the most iconic line from Gandalf?",
        109: "What is the most iconic line from Aragorn?",
        110: "What is the most iconic line from Legolas?",
        111: "What is the most iconic line from Gimli?",
        112: "What is the most iconic line from Gollum?",
        113: "If you could witness one battle from LOTR, which would it be?",
        114: "What is your favorite moment of humor in LOTR?",
        115: "Which is your favorite movie trilogy: The Lord of the Rings or The Hobbit?",
        # 116: "What is your favorite LOTR meme?",
        116: "Which age and region of Middle-earth would you want to live?",
        117: "Which LOTR movie is your favorite?",
        118: "Who is your favorite LOTR character?",
        119: "Which Hobbit movie is your favorite?",
        120: "What is your favorite LOTR species?",
        # 120: "Who is your favorite Hobbit character?",
        121: "What are your opinions on The Shire?",
        122: "Would you want to live in Rivendell?",
        123: "What are your opinions on Mirkwood Forest?",
        124: "Tweet like you live on Lothlorien?",
        125: "What are your opinions on Isengard?", #todo maybe delete
        126: "What are your opinions on Gondor?",
        127: "What are your opinions on Mordor?",
        128: "When did you first learn Aragorn broke his toe in the filming of LOTR?",
        129: "What are your opinions on the LOTR extended editions?",
        130: "Who were you hoping would win the killing count game between Gimli and Legolas?",
        131: "What are your opinions on Merry and Pippin?",
        132: "What is the most iconic line from Frodo?",
        133: "What is the most iconic line from Sam?",
        134: "Dwarves or Elves?",
        135: "What's your broad perspective on Middle-earth history?",
        136: "Elves or Hobbits?",
        137: "What are your opinions on The Fellowship of the Ring as a movie?",
        138: "What are your opinions on The Two Towers as a movie?",
        139: "What are your opinions on The Return of the King as a movie?",
        140: "What are your opinions on The Hobbit: An Unexpected Journey as a movie?",
        141: "What are your opinions on The Hobbit: The Desolation of Smaug as a movie?",
        142: "What are your opinions on The Hobbit: The Battle of the Five Armies as a movie?",
        143: "What are your opinions on The War of the Rohirrim as a movie?",
        144: "Are you happy with how Amazon handled Rings of Power?",
        145: "Which new character introduced in Rings of Power has become your favorite?",
        146: "What are your opinions on Galadriel in Rings of Power?",  # todo add image maybe
        147: "What are your opinions on Sauron in Rings of Power?",
        148: "What are your opinions on Elrond in Rings of Power?",
        149: "Which would be a better title: The Magic Ring or Lord of the Rings?",
        150: "What are your opinions on Disa in Rings of Power?",
        151: "Which location shown in Rings of Power would you most love to visit?",
        152: "Tweet like you're Thorin",
        153: "What is your least favorite episode of Rings of Power?",
        154: "What are your opinions on the Rings of Power soundtrack?",
        155: "Did you enjoy the Rings of Power cinematography?", #todo maybe delete
        156: "If you could change one thing about Rings of Power, what would it be?",
        157: "Who is your favorite new character introduced in The Rings of Power?",
        158: "Is Rings of Power Season 2 better than Season 1?",
        159: "Do you think The Rings of Power stays true to the spirit of Tolkien's work?",
        160: "LOTR or Star Wars?",
        161: "LOTR or Harry Potter?",
        162: "What are your opinions on Tolkien's writing style?",
        163: "LOTR or Marvel?",
        164: "What are your opinions on the LOTR fandom?",
        165: "LOTR or Game of Thrones?",
        166: "LOTR or The Hobbit?",
        167: "Aragorn or Legolas?",
        168: "Gandalf or Saruman?",
        # 169: "Pippin or Merry?",
        169: "Did you enjoy Sean Astin's portrayal of Sam?",
        170: "Gimli or Legolas?",
        171: "LOTR: Books or movies?",
        172: "The Hobbit: Book or movies?",
        173: "If you could spend the day with one character from LOTR, who would it be?",
        174: "If you could spend the day with one character from The Hobbit, who would it be?",
        175: "If you could have one character as a mentor from LOTR who would it be?",
        176: "If you could have one character as a mentor from The Hobbit who would it be?",
        # 177: "What are some LOTR YouTube channels you'd recommend",
        177: "What's your take on the women in Middle-earth?",
        # 178: "If you've never seen The Hobbit movies, why not?",
        178: "How do you personally view Sauron's threat?",
        179: "What are some LOTR X (Twitter) accounts you'd recommend someone following?",
        180: "What are your opinions on Bilbo Baggins in LOTR?",
        181: "What are your opinions on Boromir's death scene?",
        182: "Where in Middle-Earth would you want to live?",
        # 183: "What are your opinions on the LOTR fandom?",
        183: "Post your favorite LOTR memes belowðŸ‘‡",
        184: "What are your opinions on the LOTR video games?",
        185: "If you're stuck in the LOTR universe for 24 hours, what would you do?",
        186: "Which LOTR Lego sets do you own?",
        187: "Have you played any of the Lego LOTR video games?", #todo maybe delete
        188: "Do you like the changes made in the Hobbit movies compared to the book?",
        189: "Do you like the changes made in the LOTR movies compared to the book?",
        190: "What are your opinions on J.R.R. Tolkien?",
        191: "What are your opinions on Peter Jackson?",
        192: "Did you like Legolas being in The Hobbit movies but not the book?",
        193: "Did you like Radagast being in The Hobbit movies but not the book?",
        # 194: "If you've never seen Rings of Power, why not?",
        194: "Genuine question. Why is the Hobbit trilogy so disliked by so many people? I love it.",
        195: "What is your opinion on Tauriel being in The Hobbit movies but not the book?",
        196: "What is your opinion on Azog being in The Hobbit movies but not the book?",
        197: "What is your opinion on Saruman being in The Hobbit movies but not the book?",
        198: "Do you want more animated LOTR content?",
        199: "Did you like the Eaglesâ€™ rescue at the end of Return of the King?",
        # 200: "Did you like the ending of The Hobbit?",
        200: "What do you love about the storytelling in LOTR?",
        201: "Did you enjoy the ending of LOTR?",
        202: "Which LOTR novel did you enjoy you most?",
        # 203: "What do you think about Bilboâ€™s character arc from The Hobbit to LOTR?",
        203: "Did Elijah Wood do a good job portraying Frodo?",
        204: "Rohan or Gondor?",
        205: "Shelob or Balrog?",
        206: "Would you want to see a Silmarillion movie adaptation?",
        207: "If you could add a new member to the Fellowship, who would it be?",
        208: "Whatâ€™s a lesser-known fact about Tolkienâ€™s world that fascinates you?",
        209: "Which villain from Middle-earth do you find most compelling?",
        210: "If you could ask Tolkien one thing, what would it be?",
        # 211: "Whoâ€™s backstory would you like to see more of?",
        211: "How do you feel about the endings in Tolkien's works?",
        212: "Which minor character do you wish had more screen time?",
        213: "What LOTR trivia is the coolest?", #todo maybe delete
        214: "What do you appreciate in the villains' arcs?",
        215: "Whatâ€™s a scene you wish had been included in the movies but wasnâ€™t?",
        # 216: "If you could rewrite the ending for any character, who would it be?",
        216: "What's your broad view on the hobbit lifestyle?",
        217: "If you could ask Gandalf one question, what would it be?",
        218: "Which characterâ€™s sense of humor do you appreciate the most?",
        # 219: "Which scene from the books was most improved in the films?",
        219: "What thoughts come to mind when you think of the Fellowship?",
        220: "Which Middle-earth food or drink would you most want to try?",
        221: "Whatâ€™s your favorite LOTR quote that inspires you?",
        222: "Which character's backstory deserves its own spin-off?",
        223: "Is watching the extended editions of LOTR worth it?",
        # 224: "Which friendship duo is most underrated?",
        224: "What's your take on the LOTR creatures?",
        225: "Should the eagles have just flown Frodo and The Ring to Mordor?",
        226: "Should Gandalf have used the eagles more often?",
        227: "Tweet like you're in Middle-earth", #todo 2 comments, need to change something maybe add a few words or add emoji idk
        228: "How has LOTR affected your view on friendship?",
        229: "Would you want a LOTR story from the perspective of an orc?",
        230: "What do you disagree with most LOTR fans about?",
        231: "What's your opinion on LOTR world-building?",
        232: "What will the LOTR universe look like in 20 years?", #todo maybe delete
        # 233: "If you could give one piece of advice to Frodo, what would it be?",
        233: "Did Ian McKellen do a good job portraying Gandalf?",
        234: "Which LOTR quote inspires you in difficult times?",
        235: "Did you like the middle management orc arguing with Saruman about realistic factory output?",
        236: "Did Rings of Power live up to your expectations?",
        237: "Did The Hobbit movies live up to your expectations?",
        238: "Have you seen the 1978 animated LOTR movie?",
        239: "Did the War of the Rohirrim movie live up to your expectations?",
        240: "If you could change one thing about Rings of Power, what would it be?",
        241: "If you could change one thing about The War of the Rohirrim, what would it be?",
        242: "If you could change one thing about An Unexpected Journey movie, what would it be?",
        243: "If you could change one thing about The Desolation of Smaug movie, what would it be?",
        244: "If you could change one thing about The Battle of the Five Armies movie, what would it be?",
        245: "If you could change one thing about The Fellowship of the Ring movie, what would it be?",
        246: "If you could change one thing about The Two Towers movie, what would it be?",
        247: "If you could change one thing about The Return of the King movie, what would it be?",
        248: "If you could change one thing about Frodo, what would it be?",
        249: "If you could change one thing about Sam, what would it be?",
        250: "If you could change one thing about Gandalf, what would it be?",
        251: "If you could change one thing about Aragorn, what would it be?",
        # 252: "If you could change one thing about Legolas, what would it be?",
        252: "Did Martin Freeman do a good job portraying Bilbo?",
        253: "Did you enjoy Orlando Bloom's portrayal of Legolas?",
        254: "IS Benedict Cumberbatch a good voice for Smaug?",
        255: "Did Andy Serkis do a good job portraying Gollum?",
        256: "Did you enjoy Christopher Lee's portrayal of Saruman?",
        # 253: "If you could change one thing about Gimli, what would it be?",
        # 254: "If you could change one thing about Gollum, what would it be?",
        # 255: "If you could change one thing about Saruman, what would it be?",
        # 256: "If you could change one thing about Sauron, what would it be?",
        257: "What is your LOTR hot take?",
        258: "What do you enjoy about LOTR lore?",
        259: "Who is your favorite character from LOTR?",
        260: "Who is your favorite character from The Hobbit?",
        261: "Who is your favorite character from Rings of Power?",
        262: "Who is your least favorite character from LOTR?",
        263: "Who is your least favorite character from The Hobbit?",
        264: "Who is your least favorite character from Rings of Power?",
        265: "Should they make a GTA style LOTR game?",
        266: "Who's your least favorite member of the Fellowship?",
        #todo everything under here is a test / demo
        267: "What are your opinions on Theoden?",
        268: "What are your opinions on Denethor?",
        269: "What is your favorite quote from Aragorn?",
        270: "What is your favorite quote from Legolas?",
        271: "What is your favorite quote from Gimli?",
        272: "What is your favorite quote from Gollum?",
        # 273: "What do you think is the most underrated scene in LOTR?",
        273: "What's your general opinion on the elves?",
        274: "What is your favorite quote from Sauron?",
        275: "What is your favorite quote from Galadriel?",
        276: "What is your favorite quote from Elrond?",
        277: "What is your favorite quote from Arwen?",
        278: "What is your favorite quote from Ã‰owyn?",
        279: "What is a dark fact about LOTR that is rarely addressed?",
        # 280: "What do you think is the most epic battle in The Hobbit?",
        280: "What do you think about the journeys in LOTR?",
        281: "What do you think is the most tragic moment in The Hobbit?",
        # 282: "What do you think is the most heartwarming moment in The Hobbit?",
        282: "What's your vibe on the dwarves in Middle-earth?",
        283: "Which creature in Middle-earth would you least want to encounter?",
        284: "Which redemption story is greatest in The Hobbit?",
        285: "If you've never read The Lord of the Rings books, why not?",
        286: "Should they make more animated LOTR content?",
        # 287: "What is the biggest moment of despair in The Hobbit?",
        287: "Tweet like you're Tolkien",
        288: "What is the biggest moment of triumph in The Hobbit?",
        289: "What is the biggest moment of loss in The Hobbit?",
        290: "Which Hobbit moment of sacrifice is most significant?",
        291: "Which LOTR moment showed the greatest division?",
        # 292: "What are your opinions on Helm's Deep?",
        292: "How has reading LOTR changed you?",
        293: "What are your opinions on Minas Tirith?",
        294: "What are your opinions on Mount Doom?",
        295: "What are your opinions on the Dead Marshes?",
        296: "What are your opinions on Fangorn Forest?",
        297: "Did you like the Paths of the Dead?",
        298: "Who were you rooting for in the Battle of the Five Armies?",
        299: "What are your opinions on the Ents?",
        300: "What is the most iconic line from Boromir?",
        301: "What is the most iconic line from Faramir?",
        302: "LOTR or The Chronicles of Narnia?",
        303: "LOTR or The Witcher?",
        304: "Tell me your opinion on LOTR which will have everyone react to you like this...",
        305: "LOTR or Dune?",
        # 306: "Gollum or Smaug?",
        306: "What is your favorite line in the LOTR trilogy?",
        307: "Did Viggo Mortensen do a good job portraying Aragorn?",
        308: "Did Cate Blanchett's do a good job portraying Galadriel?",
        309: "Did Liv Tyler do a good job portraying Arwen?",
        310: "Did Miranda Otto do a good job portraying Ã‰owyn?",
        311: "Did Hugo Weaving do a good job portraying Elrond?",
        312: "Did John Rhys-Davies do a good job portraying Gimli?",
        313: "Did Sean Bean do a good job portraying Boromir?",
        314: "Did David Wenham do a good job portraying Faramir?",
        315: "Did Karl Urban do a good job portraying Ã‰omer?",
        316: "Did Bernard Hill do a good job portraying ThÃ©oden?",
        317: "Did Billy Boyd do a good job portraying Pippin?",
        318: "Did Dominic Monaghan do a good job portraying Merry?",
        321: "Did Richard Armitage do a good job portraying Thorin?",
        322: "What are your opinions on Gandalf's resurrection?",
        323: "LothlÃ³rien or Rivendell?",
        324: "What do you love most about LOTR?",
        325: "Tweet like you live in Gondor",
        326: "Tweet like you live in Isengard",
        327: "Tweet like you live in Mirkwood",
        328: "Tweet like you live in Mordor",
        329: "Tweet like you live in Rivendell",
        330: "Tweet like you're Aragorn",
        331: "Tweet like you're Arwen",
        332: "Tweet like you're Bilbo Baggins",
        333: "Tweet like you're Boromir",
        334: "Tweet like you're Elrond",
        335: "Tweet like you're Eowyn",
        336: "Tweet like you're Faramir",
        337: "Tweet like you're Frodo",
        338: "Tweet like you're Galadriel",
        339: "Tweet like you're Gandalf",
        340: "Tweet like you're Gimli",
        341: "Tweet like you're Gollum",
        342: "Tweet like you're Legolas",
        343: "Tweet like you're Samwise Gamgee",
        344: "Tweet like you're Saruman",


        #todo on a scale from 1-10 how much do you like LOTR movies and hobbit, and ROP, and War Of Rohirrim, 8 questions total




        # 272: "Which LOTR character had the most wasted potential?",


        # question about elrond being in both LOTR and rings of power, maybe if ROP was good protrayl
        # question maybe about other LOTR characters you would want to see in Rings of Power
        # question about Sauron purposely being a different actor in s2 than s1

    }

    # deleted because it got no comments in April 2025:
    #        60: "How do you view the transformation of Gollumâ€™s character?",
    #        26: "What do you think makes Aragorn such a compelling leader and hero?",
    #        82: "Book Aragorn or movie Aragorn: which portrayal is better?",
    #        52: "What do you think is the most significant moment of love in LOTR?",
    #        115: "Which character's inner journey do you find most relatable?",
    #        37: "How do you think the concept of 'home' is portrayed in LOTR?",
    #        31: "What do you think is the most powerful moment in The Hobbit?",

    # s3 bucket files look up
    lookup = {
        1: "questions/char_Frodo/",
        2: "questions/char_Samwise/",
        3: "questions/char_Gandalf/",
        4: "questions/char_Aragorn/",
        5: "questions/char_Legolas/",
        6: "questions/char_Gimli/",
        7: "questions/char_Gollum/",
        8: "questions/char_Saruman/",
        9: "questions/char_Sauron/",
        10: "None",#"questions/char_galadriel/", todo i need to find out more about this character, i got multiple comments saying the image was the wrong person so i deleted all
        11: "questions/char_Elrond/",
        12: "questions/char_Arwen/",
        13: "questions/char_Eowyn/",
        14: "questions/char_BilboBagginsYOUNG/",
        15: "questions/char_Thorin/",
        16: "questions/char_Smaug/",
        17: "questions/char_Boromir/",
        18: "None",
        19: "questions/char_Faramir/",
        20: "questions/char_Eomer/",
        21: "questions/char_Treebeard/",
        22: "questions/char_Bard/",
        23: "questions/char_Radagast/",
        24: "questions/char_Isildur/",
        25: "questions/char_Balrog/",
        26: "None",
        27: "questions/char_FrodoORSam/",
        28: "None",
        29: "None",
        30: "None",
        31: "questions/char_Gandalf/",
        32: "None",
        33: "None",
        34: "None",
        35: "None",
        36: "None",
        37: "None",
        38: "None",
        39: "None",
        40: "None",
        41: "None",
        42: "None",
        43: "None",
        44: "None",
        45: "None",
        46: "None",
        47: "None",
        48: "None",
        49: "questions/other_Silmarillion/",
        50: "None",
        51: "None",
        52: "None",
        53: "None",
        54: "None",
        55: "questions/show_RingsOfPower/",
        56: "None",
        57: "None",
        58: "None",
        59: "None",
        60: "questions/char_BilboBagginsYOUNG/",
        61: "None",
        62: "None",
        63: "None",
        64: "None",
        65: "None",
        66: "None",
        67: "None",
        68: "None",
        69: "char_Sauron/",
        70: "None",
        71: "None",
        72: "None",
        73: "questions/char_GimliORLegolas/",
        74: "None",
        75: "None",
        76: "None",
        77: "None",
        78: "questions/movie_HuntforGollum/",
        79: "None",
        80: "None",
        81: "None",
        82: "questions/char_Saruman/",
        83: "None",
        84: "None",
        85: "questions/place_MiddleEarth/",
        86: "None",
        87: "None",
        88: "None",
        89: "None",
        90: "None",
        91: "None",
        92: "questions/show_RingsOfPower/",
        93: "questions/show_RingsOfPower/",
        94: "questions/other_HobbitBook/",
        95: "questions/other_HobbitMovie/",
        96: "questions/other_LOTR-Books/",
        97: "questions/other_LOTR-Movies/",
        98: "questions/other_Silmarillion/",
        99: "None",
        100: "questions/other_LOTRlogo/",
        101: "None",
        102: "None",
        103: "questions/show_RingsOfPower/",
        104: "None",
        105: "None",
        106: "None",
        107: "questions/place_MiddleEarth/",
        108: "questions/char_Gandalf/",
        109: "questions/char_Aragorn/",
        110: "questions/char_Legolas/",
        111: "questions/char_Gimli/",
        112: "questions/char_Gollum/",
        113: "None",
        114: "None",
        115: "questions/other_movie-LOTRorHobbit/",
        116: "questions/place_MiddleEarth/",
        117: "questions/other_LOTR-Movies/",  # maybe delete this one and show just the 3 movie posters if possible idk
        118: "None",
        119: "questions/other_HobbitMovie/",  # maybe delete this also and just show hobbit movies
        120: "None",
        121: "questions/place_Shire/",
        122: "questions/place_Rivendell/",
        123: "questions/place_Mirkwood/",
        124: "questions/place_Lothlorien/",
        125: "questions/place_Isengard/",
        126: "questions/place_Gondor/",
        127: "questions/place_Mordor/",
        128: "questions/other_AragornBrokeToe/",
        129: "None",
        130: "questions/char_GimliORLegolas/",
        131: "questions/char_MerryANDPippin/",
        132: "questions/char_Frodo/",
        133: "questions/char_Samwise/",
        134: "questions/char_DwarvesORElves/",
        135: "None",
        136: "None",
        137: "questions/movie_FellowshipOfTheRing/",
        138: "f1",
        139: "questions/movie_ReturnOfTheKing/",
        140: "questions/movie_UnexpectedJourney/",
        141: "questions/movie_DesolationOfSmaug/",
        142: "questions/movie_BattleOfTheFiveArmies/",
        143: "questions/movie_WarOfTheRohirrim/",
        144: "questions/show_RingsOfPower/",
        145: "None",
        146: "None",
        147: "questions/char_SauronROP/",
        148: "questions/char_ElrondROP/",
        149: "questions/other_MagicRing/",
        150: "questions/char_Disa/",
        151: "None",
        152: "char_Thorin/",
        153: "questions/show_RingsOfPower/",
        154: "None",
        155: "None",
        156: "questions/show_RingsOfPower/",
        157: "None",
        158: "None",
        159: "questions/show_RingsOfPower/",
        160: "questions/other_LOTRorSW/",
        161: "questions/other_LOTRorHP/",
        162: "None",
        163: "questions/other_LOTRorMarvel/",
        164: "None",
        165: "questions/other_LOTRGOT/",
        166: "questions/other_movie-LOTRorHobbit/",
        167: "questions/char_AragornORLegolas/",
        168: "questions/char_SarumanORGandalf/",
        # 169: "questions/char_MerryANDPippin/",
        169: "questions/char_Samwise/",
        170: "questions/char_GimliORLegolas/",
        171: "questions/other_LOTR-BooksVMovies/",
        172: "questions/other_Hobbit-BookORMovie/",
        173: "None",
        174: "None",
        175: "None",
        176: "None",
        177: "None",
        178: "None",
        179: "None",
        180: "questions/char_BilboBagginsOLD/",
        181: "questions/other_BoromirDeath/",
        182: "questions/place_MiddleEarth/",
        183: "None",
        184: "None",
        185: "None",
        186: "questions/other_LOTRLEGO/",
        187: "questions/other_LegoLOTRvideogame/",
        188: "questions/other_Hobbit-BookORMovie/",
        189: "questions/other_LOTR-BooksVMovies/",
        190: "questions/char_Tolkien/",
        191: "questions/char_PeterJackson/",
        192: "None",
        193: "None",
        194: "questions/other_HobbitMovie/",
        195: "None",
        196: "None",
        197: "None",
        198: "None",
        199: "questions/other_EagleRescue/",
        200: "None",
        201: "None",
        202: "questions/other_LOTR-Books/",
        203: "questions/char_Frodo/",
        204: "None",
        205: "None",
        206: "questions/other_Silmarillion/",
        207: "None",
        208: "None",
        209: "None",
        210: "None",
        211: "None",
        212: "None",
        213: "None",
        214: "None",
        215: "None",  # "questions/char_JudeLaw/",
        216: "None",  # "questions/char_Omega/",
        217: "questions/char_Gandalf/",  # "questions/char_Crosshair/",
        218: "None",  # "questions/char_Hunter/",
        219: "None",  # "questions/char_Tech/",
        220: "None",  # "questions/char_Wrecker/",
        221: "None",  # "questions/char_Echo/",
        222: "None",
        223: "None",
        224: "None",
        225: "None",
        226: "None",  # "questions/char_Leia(Kenobi-show)/",
        227: "None",  # "questions/char_Obi-Wan(Kenobi-Show)/",
        228: "None",  # "questions/char_Vader(Kenobi-show)/",
        229: "None",  # "questions/char_OwenBeruLars(Kenobi-show)/",
        230: "None",
        231: "None",  # "questions/char_SenatorOrgana(Kenobi-Show)/",
        232: "None",  # "questions/char_Kumail(Kenobi-Show)/",
        233: "None",  # "questions/char_DarthJarJar/"
        234: "None",
        235: "questions/other_MiddleManagementOrc/",
        236: "questions/show_RingsOfPower/",
        237: "None",
        238: "None",
        239: "questions/movie_WarOfTheRohirrim/",
        240: "questions/show_RingsOfPower/",
        241: "questions/movie_WarOfTheRohirrim/",
        242: "questions/movie_UnexpectedJourney/",
        243: "questions/movie_DesolationOfSmaug/",
        244: "questions/movie_BattleOfTheFiveArmies/",
        245: "questions/movie_FellowshipOfTheRing/",
        246: "questions/movie_TheTwoTowers/",
        247: "questions/movie_ReturnOfTheKing/",
        248: "questions/char_Frodo/",
        249: "questions/char_Samwise/",
        250: "questions/char_Gandalf/",
        251: "questions/char_Aragorn/",
        252: "questions/char_BilboBagginsYOUNG/",
        253: "questions/char_Legolas/",
        254: "questions/char_Smaug/",
        255: "questions/other_AndySerkinsASGollum/",
        256: "questions/char_Saruman/",
        257: "questions/other_LOTRlogo/",
        258: "None",
        259: "None",
        260: "None",
        261: "None",
        262: "None",
        263: "None",
        264: "None",
        265: "None",
        266: "None",
        267: "questions/char_Theoden/",
        268: "questions/char_Denethor/",
        269: "questions/char_Aragorn/",
        270: "questions/char_Legolas/",
        271: "questions/char_Gimli/",
        272: "questions/char_Gollum/",
        273: "None",
        274: "questions/char_Sauron/",
        275: "None", #todo add picture of galadriel eventually
        276: "questions/char_Elrond/",
        277: "questions/char_Arwen/",
        278: "questions/char_Eowyn/",
        279: "questions/other_LOTRlogo/",
        280: "None",
        281: "None",
        282: "None",
        283: "None",
        284: "None",
        285: "None",
        286: "None",
        287: "questions/char_Tolkien/",
        288: "None",
        289: "None",
        290: "None",
        291: "None",
        292: "None",
        293: "None",
        294: "None",
        295: "None",
        296: "questions/other_FangornForest/",
        297: "questions/other_PathsOfTheDead/",
        298: "None",
        299: "questions/char_Ents/",
        300: "questions/char_Boromir/",
        301: "questions/char_Faramir/",
        302: "None",
        303: "None",
        304: "questions/other_UnpopularOpinionSword/",
        305: "None",
        306: "None",
        307: "questions/char_Aragorn/",
        308: "questions/char_Galadriel/",
        309: "questions/char_Arwen/",
        310: "questions/char_Eowyn/",
        311: "questions/char_Elrond/",
        312: "questions/char_Gimli/",
        313: "questions/char_Boromir/",
        314: "questions/char_Faramir/",
        315: "questions/char_Eomer/",
        316: "questions/char_Theoden/",
        317: "questions/char_Pippin/",
        318: "questions/char_Merry/",
        321: "questions/char_Thorin/",
        322: "questions/char_Gandalf/",
        323: "None",
        324: "None",
        325: "questions/place_Gondor/",
        326: "questions/place_Isengard/",
        327: "questions/place_Mirkwood/",
        328: "questions/place_Mordor/",
        329: "questions/place_Rivendell/",
        330: "questions/char_Aragorn/",
        331: "questions/char_Arwen/",
        332: "questions/char_BilboBagginsYOUNG/",
        333: "questions/char_Boromir/",
        334: "questions/char_Elrond/",
        335: "questions/char_Eowyn/",
        336: "questions/char_Faramir/",
        337: "questions/char_Frodo/",
        338: "questions/char_galadriel/",
        339: "questions/char_Gandalf/",
        340: "questions/char_Gimli/",
        341: "questions/char_Gollum/",
        342: "questions/char_Legolas/",
        343: "questions/char_Samwise/",
        344: "questions/char_Saruman/",
        345: "None",
        346: "None",
        347: "None",
        348: "None",
        349: "None",
        350: "None",
        351: "None",
        352: "None",
        353: "None",
    }

    if random.randint(1,5) == 1:
        #this sends question to Middle Earth Meems 1/5 of the time, LOTR Daily 4/5 of the time
        API_KEY = "
        API_SECRET_KEY =
        ACCESS_TOKEN =
        ACCESS_TOKEN_SECRET =
        BEARER_TOKEN =

    else:
        API_KEY = os.environ["API_KEY"]
        API_SECRET_KEY = os.environ["API_SECRET_KEY"]
        ACCESS_TOKEN = os.environ["ACCESS_TOKEN"]
        ACCESS_TOKEN_SECRET = os.environ["ACCESS_TOKEN_SECRET"]
        BEARER_TOKEN = os.environ["BEARER_TOKEN"]


    auth = tweepy.OAuth1UserHandler(API_KEY, API_SECRET_KEY, ACCESS_TOKEN, ACCESS_TOKEN_SECRET)
    api = tweepy.API(auth)

    client = tweepy.Client(
        bearer_token=BEARER_TOKEN,
        consumer_key=API_KEY,
        consumer_secret=API_SECRET_KEY,
        access_token=ACCESS_TOKEN,
        access_token_secret=ACCESS_TOKEN_SECRET
    )

    bucket_name = 'lotr.photos'
    file_key = 'notes/lotr_questions.txt'
    s3 = boto3.client('s3')

    try:
        # Fetch the current file from S3
        response = s3.get_object(Bucket=bucket_name, Key=file_key)
        file_content = response['Body'].read().decode('utf-8')

        # Convert the file content (string) into a Python list
        question_indices = json.loads(file_content)
        print(question_indices)

        index = random.randint(1, len(questions))

        # try again until we get new item not in list
        while index in question_indices:
            index = random.randint(1, len(questions))

        # index = 1
        path = lookup[index]

        question_indices.insert(0, index)
        if len(question_indices) > 200:
            question_indices.pop()  # Remove the last element

        updated_content = json.dumps(question_indices)

        s3.put_object(Bucket=bucket_name, Key=file_key, Body=updated_content)
        question = questions[index]

        contains_thoughts = "thoughts" in question.lower()
        contains_opinions = "opinions" in question.lower()

        # Only proceed if at least one of the words is present
        if contains_thoughts or contains_opinions:
            # Replace "thoughts" with randomly chosen word
            if contains_thoughts:
                replacement = "thoughts"
                if random.random() < 0.5:
                    replacement = "opinions"

                if random.random() < 0.2:
                    replacement = "honest " + replacement
                pattern = r'\bthoughts\b'
                question = re.sub(pattern, replacement, question)
                print("REPLACED")

            # Replace "opinions" with randomly chosen word
            if contains_opinions:
                replacement = "thoughts"
                if random.random() < 0.5:
                    replacement = "opinions"

                if random.random() < 0.2:
                    replacement = "honest " + replacement
                pattern = r'\bopinions\b'
                question = re.sub(pattern, replacement, question)

        if path == "None":  # upload just text, no image
            client.create_tweet(text=question)
            return f"POSTED TWEET {question} with no image"

        response = s3.list_objects_v2(Bucket=bucket_name, Prefix=path)
        if 'Contents' not in response:
            return {
                'statusCode': 404,
                'body': 'No files found in the specified directory.'
            }
        # Extract file keys (paths) from the response
        file_keys = [obj['Key'] for obj in response['Contents'] if obj['Key'] != path]
        # Check if there are files to choose from
        if not file_keys:
            return {
                'statusCode': 404,
                'body': 'No files found in the specified directory.'
            }

        # Pick a random file from the list
        random_file = random.choice(file_keys)

        # these 4 are for image, not implemented yet:
        download_path = f"/tmp/{os.path.basename(random_file)}"
        s3.download_file(bucket_name, random_file, download_path)
        media = api.media_upload(download_path)
        client.create_tweet(text=question, media_ids=[media.media_id])
        return f"tweeted image with question {question}"
    except Exception as e:
        print(e)

